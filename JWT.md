# JSON Web Token
인증과 정보 교환에 자주 사용되는 컴팩트한 방식의 토큰

## 1. Header
- 헤더는 일반적으로 두 가지 정보 포함(추가 가능)
- 토큰의 타입`typ`, 토큰의 알고리즘`alg` 예: HMAC SHA256, RSA
- 이 정보는 jSON객체로 표현되며, 그 다음 Base64Url로 인코딩
```json
{
  "alg" : "HS256",
  "typ" : "JWT"
}
```

## 2. Payload
- 토큰에 담길 claim들의 집합
- 클레임은 토큰에 대한 속성이다 주제에 관한 성명
- 3가지 유형
  - 등록된 클레임 : 서비스에서 필요로 하는 정보를 포함하는 사전 정의된 클레임 세트 예 : 발급자`iss`, 만료 시간 `exo`, 주제 `sub`, 수신자 `aud`
  - 공개 클레임 : 충돌이 방지된 이름을 가진 사용자 정의 클레임으로, 충돌을 방지하기 위해 URI 형식을 사용할 수 있음
  - 비공개 클레임 : 두 시스템 간에 협의하에 사용되는 사용자 정의 클레임
```json
{
  "sub": "1234567890",
  "name": "John Doe",
  "admin": true
}
```


## Signature
- 토큰이 보호되고 유효한지 확인하기 위해 사용
- 헤더의 인코딩된 값, 페이로드의 인코딩된 값, 비밀키, 그리고 헤더에서 정의한 알고리즘을 사용하여 생성
- 서명은 토큰이 중간에 변경되지 않았음을 보장하는 데 사용
```plaintext
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret)
```


## 암호화 방법
- JWT 자체는 암호화되지 않음
- 즉, 페이로드 내용은 Base64Url 인코딩을 통해 단순히 인코딩된 것일 뿐이며, 이 인코딩된 정보는 누구나 디코딩할 수 있음
- 그러나 서명은 토큰의 무결성을 보장하기 위해 사용되며, 서명 과정에서 사용되는 비밀키는 서버에 안전하게 보관되어야 함
